<!DOCTYPE html>
<html lang="fr" class="dark">

<head>
    <meta charset="UTF-8" />
    <title>Craftopia - Installation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/favicon.png">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>

    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />

    <style>
        /* ------------ PARTICULES ORANGES ------------ */
        #particles {
            position: fixed;
            inset: 0;
            z-index: -1;
        }

        /* Glass effect */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
        }

        .btn-orange {
            background: linear-gradient(90deg, #ff6b35, #ff3c00);
        }

        .btn-orange:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .transition-theme {
            transition: background 0.4s, color 0.4s;
        }
    </style>
</head>

<body class="transition-theme dark:bg-[#0d0d0d] bg-gray-100 dark:text-white text-gray-900">

    <!-- CANVAS PARTICULES -->
    <canvas id="particles"></canvas>

    <!-- TOGGLE DARK MODE -->
    <button id="toggleTheme" class="fixed top-6 right-6 bg-black/40 text-white px-4 py-2 rounded-xl backdrop-blur-md">
        üåô / ‚òÄÔ∏è
    </button>

    <div class="w-full max-w-7xl mx-auto px-6 py-20">

        <!-- HEADER -->
        <h2 class="text-center text-lg font-semibold text-orange-400 tracking-wide uppercase">
            Choisissez votre m√©thode d'installation
        </h2>

        <p class="mt-4 text-center text-4xl sm:text-5xl font-bold">
            Installez <span class="text-orange-400">Craftopia - Saison 1</span>
        </p>

        <!-- COMPTE √Ä REBOURS -->
        <div class="mt-8 text-center">
            <p class="text-xl font-semibold">Lancement dans :</p>
            <div id="countdown" class="mt-3 text-3xl font-bold text-orange-400">
                00j : 00h : 00m : 00s
            </div>
        </div>

        <!-- BOUTON VIDEO -->
        <div class="text-center mt-10">
            <button id="openVideo"
                class="px-6 py-3 rounded-lg bg-orange-500/20 border border-orange-500 text-orange-300 hover:bg-orange-500/30">
                üé• Voir le trailer
            </button>
            <a href="https://discord.gg/ARYg23yHsY"
                class="px-6 py-3 rounded-lg bg-orange-500/20 border border-orange-500 text-orange-300 hover:bg-orange-500/30">
                üåê Support Discord
            </a>
        </div>

        <!-- GRID INSTALLATIONS -->
        <div class="mt-16 grid gap-8 lg:grid-cols-3 lg:grid-rows-2">

            <!-- WINDOWS -->
            <div class="card p-6 rounded-2xl flex flex-col">
                <h3 class="text-2xl font-bold">Installation Windows</h3>
                <p class="text-sm text-gray-300 mt-2">
                    Compatible Windows 10 & Windows 11
                </p>

                <img src="img/Windows.png" draggable="false" class="w-full h-56 object-contain mt-6 flex-1">

                <button
                    class="download-btn btn-orange mt-6 py-3 w-full rounded-lg text-center font-semibold text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed"
                    data-link="craftopia.exe">
                    T√©l√©charger pour Windows
                </button>

            </div>

            <!-- LINUX -->
            <div class="card p-6 rounded-2xl flex flex-col">
                <h3 class="text-2xl font-bold">Installation Linux</h3>
                <p class="text-sm text-gray-300 mt-2">
                    Compatible Debian, Ubuntu, Arch...
                </p>

                <img src="img/Linux.png" draggable="false" class="w-full h-56 object-contain mt-6 flex-1">

                <button
                    class="download-btn btn-orange mt-6 py-3 w-full rounded-lg text-center font-semibold text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed"
                    data-link="craftopia.jar">
                    T√©l√©charger pour Linux
                </button>

            </div>
            <!-- MACOS -->
            <div class="card p-6 rounded-2xl flex flex-col">
                <h3 class="text-2xl font-bold">Installation macOS</h3>
                <p class="text-sm text-gray-300 mt-2">
                    Compatible Apple Silicon & Intel
                </p>

                <img src="img/MacOS.png" draggable="false" class="w-full h-56 object-contain mt-6 flex-1">

                <button
                    class="download-btn btn-orange mt-6 py-3 w-full rounded-lg text-center font-semibold text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed"
                    data-link="craftopia.jar">
                    T√©l√©charger pour macOS
                </button>

            </div>



        </div>
    </div>

    <!-- MODAL VIDEO -->
    <div id="videoModal" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center backdrop-blur-md">
        <div class="bg-black p-4 rounded-xl w-[90%] max-w-3xl">
            <button id="closeVideo" class="text-white mb-3 text-right w-full">‚úñ Fermer</button>
            <iframe id="ytFrame" width="100%" height="400" class="rounded-lg" src="" allow="autoplay"
                allowfullscreen></iframe>
        </div>
    </div>



    <script>
        /* ------------------- PARTICULES ORANGES ------------------- */
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resize();
        window.onresize = resize;

        function createParticle() {
            return {
                x: Math.random() * canvas.width,
                y: canvas.height + 10,
                size: Math.random() * 3 + 1,
                speed: Math.random() * 1 + 0.5,
                alpha: Math.random() * 0.5 + 0.2
            };
        }

        function loop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (particles.length < 120) particles.push(createParticle());

            particles.forEach((p, i) => {
                ctx.fillStyle = `rgba(255, 120, 50, ${p.alpha})`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                p.y -= p.speed;
                p.alpha -= 0.002;

                if (p.alpha <= 0) particles.splice(i, 1);
            });

            requestAnimationFrame(loop);
        }
        loop();


        /* ------------------- COMPTE √Ä REBOURS ------------------- */
        const targetDate = new Date("2025-12-19T21:00:00").getTime();

        setInterval(() => {
            const now = Date.now();
            const diff = targetDate - now;

            if (diff <= 0) {
                countdown.innerHTML = "üéâ C'est maintenant disponible !";
                return;
            }

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor(diff / (1000 * 60 * 60) % 24);
            const m = Math.floor(diff / (1000 * 60) % 60);
            const s = Math.floor(diff / 1000 % 60);

            countdown.innerHTML = `${d}j : ${h}h : ${m}m : ${s}s`;
        }, 1000);
        /* ------------------- VERROUILLAGE DES T√âL√âCHARGEMENTS ------------------- */

        const downloadButtons = document.querySelectorAll(".download-btn");

        // D√©sactive les boutons au chargement
        downloadButtons.forEach(btn => {
            btn.disabled = true;
            btn.innerText = "Disponible bient√¥t";
        });

        function enableDownloads() {
            downloadButtons.forEach(btn => {
                btn.disabled = false;
                btn.innerText = btn.innerText.replace("Disponible bient√¥t", "T√©l√©charger maintenant !").trim();

                btn.onclick = () => {
                    const link = btn.getAttribute("data-link");
                    window.location.href = link;
                };
            });
        }

        /* Modification du compte √† rebours pour activer le t√©l√©chargement */
        setInterval(() => {
            const now = Date.now();
            const diff = targetDate - now;

            if (diff <= 0) {
                countdown.innerHTML = "üéâ Le launcher est maintenant disponible !";
                enableDownloads(); // üëà Active les t√©l√©chargements automatiquement
            } else {
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const m = Math.floor((diff / (1000 * 60)) % 60);
                const s = Math.floor((diff / 1000) % 60);

                countdown.innerHTML = `${d}j : ${h}h : ${m}m : ${s}s`;
            }
        }, 1000);


        /* ------------------- DARK / LIGHT MODE ------------------- */
        const toggle = document.getElementById("toggleTheme");
        const html = document.documentElement;

        if (localStorage.theme === "light") {
            html.classList.remove("dark");
        }

        toggle.onclick = () => {
            html.classList.toggle("dark");
            localStorage.theme = html.classList.contains("dark") ? "dark" : "light";
        };


        /* ------------------- POPUP VIDEO ------------------- */
        const modal = document.getElementById("videoModal");
        const openVideo = document.getElementById("openVideo");
        const closeVideo = document.getElementById("closeVideo");
        const ytFrame = document.getElementById("ytFrame");

        openVideo.onclick = () => {
            modal.classList.remove("hidden");
            ytFrame.src = "https://www.youtube.com/embed/ysz5S6PUM-U?autoplay=1";
        };

        closeVideo.onclick = () => {
            modal.classList.add("hidden");
            ytFrame.src = "";
        };

        modal.onclick = (e) => {
            if (e.target === modal) {
                modal.classList.add("hidden");
                ytFrame.src = "";
            }
        };
    </script>

</body>

</html>
